(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{559:function(e,t,a){"use strict";a.r(t);var s=a(2),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("hr"),e._v(" "),a("p",[e._v("摘要: ffmpeg视频推流总结\n时间: 2021-02-01")]),e._v(" "),a("hr"),e._v(" "),a("img",{attrs:{src:"/img/7.jpg",width:"256px",height:"144px"}}),e._v(" "),a("h2",{attrs:{id:"准备环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备环境"}},[e._v("#")]),e._v(" 准备环境")]),e._v(" "),a("h3",{attrs:{id:"安装ffmpeg客户端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装ffmpeg客户端"}},[e._v("#")]),e._v(" "),a("em",[a("a",{attrs:{href:"https://www.ffmpeg.org/download.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("安装ffmpeg客户端"),a("OutboundLink")],1)])]),e._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://evermeet.cx/ffmpeg/",target:"_blank",rel:"noopener noreferrer"}},[e._v("mac下载地址"),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://johnvansickle.com/ffmpeg/",target:"_blank",rel:"noopener noreferrer"}},[e._v("linux下载地址"),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://www.gyan.dev/ffmpeg/builds/",target:"_blank",rel:"noopener noreferrer"}},[e._v("windows下载地址"),a("OutboundLink")],1)])]),e._v(" "),a("h3",{attrs:{id:"安装livego服务端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装livego服务端"}},[e._v("#")]),e._v(" "),a("em",[a("a",{attrs:{href:"https://github.com/gwuhaolin/livego",target:"_blank",rel:"noopener noreferrer"}},[e._v("安装livego服务端"),a("OutboundLink")],1)])]),e._v(" "),a("blockquote",[a("p",[a("em",[a("a",{attrs:{href:"https://s3plus.meituan.net/v1/mss_7e425c4d9dcb4bb4918bbfa2779e6de1/mpack/default/demo.flv",target:"_blank",rel:"noopener noreferrer"}},[e._v("\b视频素材demo.flv下载"),a("OutboundLink")],1)])])]),e._v(" "),a("h2",{attrs:{id:"视频推流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视频推流"}},[e._v("#")]),e._v(" 视频推流")]),e._v(" "),a("h3",{attrs:{id:"启动livego服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动livego服务"}},[e._v("#")]),e._v(" 启动livego服务")]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# linux 或 mac 环境下")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 赋予可执行权限")]),e._v("\nchomd "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("755")]),e._v(" livego\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 启动服务")]),e._v("\n./livego\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# windows 环境下")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 启动服务")]),e._v("\nlivego.exe \n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br")])]),a("h3",{attrs:{id:"获取密钥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取密钥"}},[e._v("#")]),e._v(" 获取密钥")]),e._v(" "),a("p",[a("code",[e._v("请求")])]),e._v(" "),a("div",{staticClass:"language-http line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-http"}},[a("code",[a("span",{pre:!0,attrs:{class:"token header-name keyword"}},[e._v("http:")]),e._v("//localhost:8090/control/get?room=movie\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("code",[e._v("响应")])]),e._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"status"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"data"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"rfBd56ti2SMtYvSgD5xAV0YU99zampta7Z7S575KLkIZ9PYk"')]),e._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 密钥")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br")])]),a("h3",{attrs:{id:"视频推流-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视频推流-2"}},[e._v("#")]),e._v(" 视频推流")]),e._v(" "),a("p",[a("code",[e._v("命令行输入以下命令")])]),e._v(" "),a("blockquote",[a("p",[e._v("格式：ffmpeg -re -i 视频文件 -c copy -f flv rtmp://localhost:1935/live/密钥")])]),e._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[e._v("ffmpeg -re -i demo.flv -c copy -f flv rtmp://localhost:1935/live/rfBd56ti2SMtYvSgD5xAV0YU99zampta7Z7S575KLkIZ9PYk\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"视频播放"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#视频播放"}},[e._v("#")]),e._v(" 视频播放")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("RTMP:rtmp://localhost:1935/live/movie\n\nFLV:http://127.0.0.1:7001/live/movie.flv\n\nHLS:http://127.0.0.1:7002/live/movie.m3u8\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("h2",{attrs:{id:"第三方库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三方库"}},[e._v("#")]),e._v(" 第三方库")]),e._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"https://github.com/xfrr/goffmpeg",target:"_blank",rel:"noopener noreferrer"}},[e._v("goffmpeg"),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://github.com/imkira/go-libav",target:"_blank",rel:"noopener noreferrer"}},[e._v("go-libav"),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://github.com/bilibili/flv.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("flv.js"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);