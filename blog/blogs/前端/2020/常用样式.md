---
# æ–‡ç« æ ‡é¢˜
title: å¸¸ç”¨æ ·å¼
# æ–‡ç« åˆ›å»ºæ—¥æœŸï¼Œæ ¼å¼ 2020-12-18 æˆ– 2020-12-18 08:00:00ã€‚
date: 2020-12-23
# æ‰€å±æ ‡ç­¾ï¼ˆå¯ä»¥è®¾ç½®å¤šä¸ªğŸ·ï¼‰
tags:
  - ä»£ç ç‰‡æ®µ
# æ‰€å±åˆ†ç±»ï¼ˆå¯ä»¥è®¾ç½®å¤šä¸ªğŸ’–ï¼‰
categories:
  - å‰ç«¯
# æ˜¯å¦å¼€å¯ä¾§è¾¹æ 
sidebar: "auto"
# æ–‡ç« ç½®é¡¶ï¼ˆæ•°å­—ä»£è¡¨æ’åºæƒé‡ğŸ“šï¼‰
sticky: 0
# æ–‡ç« æ˜¯å¦å‘å¸ƒ trueï¼ˆå‘å¸ƒï¼‰false(è‰ç¨¿)
publish: true
---

---

æ‘˜è¦: å¸¸ç”¨æ ·å¼
æ—¶é—´: 2020-12-23

---

<img src="/img/8.jpg" width="256px" height="144px">

<!-- more -->

## å¸¸ç”¨å†™æ³•è¯´æ˜

```css
// ä¿è¯å±…ä¸­å¯¹é½
display: flex;
justify-content: center;
align-items: center;

// å¯ä»¥å æ®å‰©ä½™ç©ºé—´
flex: 1;

// ç¬¬ä¸€ä¸ªdivï¼Œæ³¨æ„ç±»ä¼¼äºé€šé…ç¬¦
div: nth-child(1);

// å†…è¾¹æ¡†
border: 0.278vw solid #e97b99;

// å¤–è¾¹æ¡†ï¼ˆè½®å»“ï¼‰
outline: none;

// å¯ä»¥è®¾ç½®å³è¾¹åˆ†ç•Œçº¿
border-right: 0.278vw solid #ccc;

// å¯ä»¥è®¾ç½®åº•éƒ¨åˆ†ç•Œçº¿
border-bottom: 1px solid #e7e7e7;

// å†…è¾¹è·
padding: 0.833vw;

// ä¸Šã€å³ã€ä¸‹ã€å·¦ï¼ˆé¡ºæ—¶é’ˆï¼‰
padding: 20px 0 10px 10px;

// åœ†è§’ï¼ˆé«˜åº¦ä¸€åŠï¼‰
border-radius: 1.389vw;

// é˜´å½±(å³ã€ä¸‹ã€å…¨ é¡ºæ—¶é’ˆ)
box-shadow: 0px 0px 10px #aaa;

// å­—ä½“é¢œè‰²
color: #e97b99;

// çºµå‘æ’åˆ—
flex-direction: column;

// æ¨ªå‘å‡åŒ€åˆ†å¸ƒ
justify-content: space-between;

// é…ç½®ç›¸å¯¹å®šä½ï¼Œå¯ä»¥å®šä½å³è¾¹å…ƒç´ 
right: 0;

// æ—‹è½¬180åº¦
transform: rotate(180deg);

.detailparent {
  display: flex;
  // å­é¡¹ç›®å¤šè¡Œ
  flex-wrap: wrap;
  justify-content: space-between;
  .detailitem {
    // å¤–è¾¹è·
    margin: 10px 0;
    width: 45%;
  }
}
.uploadfile {
  // ç›¸å¯¹å®šä½
  position: relative;
  // å†…å®¹ä¼šè¢«ä¿®å‰ªï¼Œå¹¶ä¸”å…¶ä½™å†…å®¹æ˜¯ä¸å¯è§çš„
  overflow: hidden;
  .uploadimg {
    // é€æ˜åº¦ ä»0.0ï¼ˆå®Œå…¨é€æ˜ï¼‰åˆ°1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰
    opacity: 0;
    // ç»å¯¹å®šä½
    position: absolute;
  }
}
div:nth-child(2) {
  flex: 1;
  display: flex;
  align-items: center;
  margin: 0 5px;
  p {
    font-size: 3vw;
    line-height: 6vw;
    background-color: white;
    height: 6.322vw;
    width: 100%;
    position: relative;
    padding-left: 6.944vw;
    border-radius: 3.611vw;
    color: #aaa;
    .input-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      // å¯ä»¥è°ƒæ•´ä¸ºå±…ä¸­
      transform: translate(0, -50%);
      color: #aaa;
    }
  }
}
```

## å¸ƒå±€ä¸€

:::tip
p æ ‡ç­¾ï¼šå—çº§å…ƒç´ 

span æ ‡ç­¾ï¼šè¡Œçº§å…ƒç´ 
:::

```html
<template>
  <div class="userdetal">
    <div>
      <!-- å·¦ä¾§-å¤´åƒ -->
      <div class="user_img">
        <img :src="userinfo.user_img" alt="" v-if="userinfo.user_img" />
        <img src="@/assets/user.jpg" v-else />
      </div>
      <!-- å³ä¾§ -->
      <div class="user_edit">
        <div>
          <p>
            <span>666</span>
            <span class="user_test">ç²‰ä¸</span>
          </p>
          <p>
            <span>666</span>
            <span class="user_test">å…³æ³¨</span>
          </p>
          <p>
            <span>666</span>
            <span class="user_test">è·èµ</span>
          </p>
        </div>
        <div @click="$router.push('/edit')">
          <div class="user_editbtn">
            ç¼–è¾‘èµ„æ–™
          </div>
        </div>
      </div>
    </div>
    <!-- ä¸ªäººä¿¡æ¯ -->
    <div>
      <h2 v-if="userinfo.name">{{ userinfo.name }}</h2>
      <h2 v-else>å­˜åœ¨ã—ãŸããªã„ã—</h2>
      <p v-if="userinfo.user_desc">{{ userinfo.user_desc }}</p>
      <p v-else>è¿™ä¸ªäººå¾ˆç¥ç§˜ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰å†™</p>
    </div>
  </div>
</template>

<style lang="scss" scoped>
  .user_edit {
    flex: 1;
    div:nth-child(1) {
      display: flex;
      p {
        flex: 1;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        .user_test {
          color: #aaa;
        }
      }
      p:nth-child(1),
      p:nth-child(2) {
        border-right: 0.278vw solid #ccc;
      }
    }
    div:nth-child(2) {
      padding: 5.556vw;
      .user_editbtn {
        border: 0.278vw solid #e97b99;
        padding: 0.833vw;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #e97b99;
        border-radius: 1.389vw;
      }
    }
  }
</style>
```

## å¸ƒå±€äºŒ

```html
<template>
  <div class="home">
    <nav-bar></nav-bar>
    <van-tabs v-model="active" swipeable sticky>
      <van-tab
        v-for="(item, index) in category"
        :key="index"
        :title="item.title"
      >
        <div v-if="active == index">
          <van-list
            v-model="item.loading"
            :finished="item.finished"
            finished-text="æˆ‘ä¹Ÿæ˜¯æœ‰åº•çº¿çš„"
            :immediate-check="false"
            @load="onLoad"
          >
            <div class="detailparent">
              <detail
                class="detailitem"
                v-for="(categoryitem, categoryindex) in item.list"
                :key="categoryindex"
                :detailItem="categoryitem"
              />
            </div>
          </van-list>
        </div>
      </van-tab>
    </van-tabs>
  </div>
</template>

<script>
  import NavBar from "@/components/common/NavBar";
  import Detail from "./Detail";

  export default {
    name: "Home",
    components: {
      NavBar,
      Detail,
    },
    data() {
      return {
        category: [],
        active: 0,
      };
    },
    methods: {
      async selectCategory() {
        const res = await this.$http.get("/category");
        this.changeCategory(res.data);
      },
      changeCategory(data) {
        const category1 = data.map((item) => {
          item.list = [];
          item.page = 0;
          item.finished = false;
          item.loading = false;
          item.pagesize = 10;
          return item;
        });
        console.log(category1);
        this.category = category1;
      },
      async selectArticle() {
        const categoryItem = this.categoryItem();
        const res = await this.$http.get("/detail/" + categoryItem._id, {
          params: {
            page: categoryItem.page,
            pagesize: categoryItem.pagesize,
          },
        });
        categoryItem.list.push(...res.data);
        if (res.data.length < categoryItem.pagesize) {
          categoryItem.finished = true;
        }
      },
      categoryItem() {
        const categoryItem = this.category[this.active];
        console.log(categoryItem);
        return categoryItem;
      },
      onLoad() {
        const categoryItem = this.categoryItem();
        categoryItem.page += 1;
        categoryItem.loading = false;
        this.selectArticle();
      },
    },
    watch: {
      active() {
        this.selectArticle();
      },
    },
    created() {
      this.selectCategory();
    },
  };
</script>

<style lang="scss" scoped>
  .home {
    background-color: white;
  }
  .detailparent {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    .detailitem {
      margin: 10px 0;
      width: 45%;
    }
  }
</style>
```

## å¸ƒå±€ä¸‰

```html
<template>
  <div v-if="model" class="editViews">
    <div style="margin-bottom:10px;">
      <nav-bar :imgurl="model.user_img"></nav-bar>
    </div>
    <div class="uploadfile">
      <van-uploader
        class="uploadimg"
        preview-size="100vw"
        :after-read="afterRead"
      />
      <edit-banner left="å¤´åƒ">
        <img :src="model.user_img" alt="" slot="right" v-if="model.user_img" />
        <img src="@/assets/default_img.jpg" alt="" slot="right" v-else />
      </edit-banner>
    </div>

    <edit-banner left="æ˜µç§°" @bannerClick="show = true">
      <a href="javascript:;" slot="right">{{ model.name }}</a>
    </edit-banner>
    <edit-banner left="è´¦å·">
      <a href="javascript:;" slot="right">{{ model.username }}</a>
    </edit-banner>
    <edit-banner left="æ€§åˆ«" @bannerClick="genderShow = true">
      <a href="javascript:;" slot="right"
        >{{ model.gender == 1 ? "ç”·" : "å¥³" }}</a
      >
    </edit-banner>
    <edit-banner left="ä¸ªç­¾" @bannerClick="textShow = true">
      <a href="javascript:;" slot="right">{{ model.user_desc }}</a>
    </edit-banner>
    <van-dialog
      v-model="show"
      title="æ˜µç§°"
      show-cancel-button
      @confirm="confirmClick"
      @cancel="content = ''"
    >
      <van-field v-model="content" autofocus />
    </van-dialog>
    <van-dialog
      v-model="textShow"
      title="ä¸ªç­¾"
      show-cancel-button
      @confirm="testClick"
      @cancel="content = ''"
    >
      <van-field v-model="content" autofocus />
    </van-dialog>
    <div class="editback" @click="$router.back()">è¿”å›ä¸ªäººä¸­å¿ƒ</div>
    <van-action-sheet
      v-model="genderShow"
      :actions="actions"
      cancel-text="å–æ¶ˆ"
      @select="onSelect"
    />
  </div>
</template>

<script>
  import NavBar from "@/components/common/NavBar";
  import EditBanner from "@/components/common/EditBanner";
  export default {
    name: "Edit",
    components: {
      NavBar,
      EditBanner,
    },
    data() {
      return {
        model: {},
        show: false,
        textShow: false,
        content: "",
        genderShow: false,
        actions: [
          { name: "ç”·", val: 1 },
          { name: "å¥³", val: 0 },
        ],
      };
    },
    methods: {
      async selectUser() {
        const res = await this.$http.get("/user/" + localStorage.getItem("id"));
        this.model = res.data[0];
      },
      async afterRead(data) {
        console.log(data);
        var formdata = new FormData();
        formdata.append("file", data.file);
        const res = await this.$http.post("/upload", formdata);
        console.log(res);
        this.model.user_img = res.data.url;
        this.userUpdate();
      },
      async userUpdate() {
        const res = await this.$http.post(
          "/update/" + localStorage.getItem("id"),
          this.model
        );
        if (res.data.code == 200) {
          this.$msg.fail("ä¿®æ”¹æˆåŠŸ");
        }
        console.log(res);
      },
      confirmClick() {
        console.log("ç¡®è®¤");
        this.model.name = this.content;
        this.userUpdate();
        this.content = "";
      },
      testClick() {
        console.log("ç¡®è®¤");
        this.model.user_desc = this.content;
        this.userUpdate();
        this.content = "";
      },
      onSelect(data) {
        console.log(data);
        this.model.gender = data.val;
        this.userUpdate();
        this.genderShow = false;
      },
    },
    created() {
      this.selectUser();
    },
  };
</script>

<style lang="scss" scoped>
  .editViews a {
    color: #333;
  }
  .editViews img {
    height: 46px;
    width: 46px;
  }
  .uploadfile {
    position: relative;
    overflow: hidden;
    .uploadimg {
      opacity: 0;
      position: absolute;
    }
  }
  .editback {
    margin-top: 5.556vw;
    background-color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 5vw;
    padding: 1.389vw 0;
    color: #999;
  }
</style>
```
